<!-- Sidebar -->
<div
  class="fixed inset-y-0 left-0 z-40 w-64 bg-gray-900 text-gray-100 transform transition-transform duration-300 ease-in-out
         md:translate-x-0 md:static md:inset-0 sidebar-main"
  [ngClass]="{ '-translate-x-full': !isSidebarOpen, 'translate-x-0': isSidebarOpen }"
>
  <!-- Header -->
  <div class="flex items-center justify-between p-4 border-b border-gray-700">
    <h2 class="text-lg font-semibold">Menu</h2>
    <button class="md:hidden" (click)="toggleSidebar()">
      <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" fill="none"
           viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M6 18L18 6M6 6l12 12" />
      </svg>
    </button>
  </div>

  <!-- Menu -->
  <nav class="mt-4 flex flex-col space-y-1">
    <ng-container *ngFor="let item of menuItems">
      <div>
        <!-- Item principal com rota -->
        <a
          *ngIf="item.route; else dropdownButton"
          [routerLink]="item.route"
          routerLinkActive="bg-gray-800 text-white"
          class="w-full flex justify-between items-center px-4 py-2 hover:bg-gray-800 transition-colors rounded text-left"
        >
          {{ item.title }}
        </a>

        <!-- BotÃ£o de dropdown -->
        <ng-template #dropdownButton>
          <button
            (click)="item.children ? toggleSubmenu(item) : null"
            class="w-full flex justify-between items-center px-4 py-2 hover:bg-gray-800 transition-colors rounded text-left"
          >
            <span>{{ item.title }}</span>
            <svg *ngIf="item.children"
                 xmlns="http://www.w3.org/2000/svg"
                 class="w-4 h-4 transform transition-transform duration-300"
                 [ngClass]="{ 'rotate-180': item.expanded }"
                 fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M19 9l-7 7-7-7"/>
            </svg>
          </button>
        </ng-template>

        <!-- Submenu -->
        <div
          *ngIf="item.children"
          class="ml-6 mt-1 flex flex-col overflow-hidden transition-all duration-300 ease-in-out"
          [ngClass]="{
            'max-h-0 opacity-0': !item.expanded,
            'max-h-40 opacity-100': item.expanded
          }"
        >
          <a
            *ngFor="let child of item.children"
            [routerLink]="child.route"
            routerLinkActive="bg-gray-800 text-white"
            class="block px-4 py-1 text-sm hover:bg-gray-800 rounded transition-colors"
          >
            {{ child.title }}
          </a>
        </div>
      </div>
    </ng-container>
  </nav>
</div>
